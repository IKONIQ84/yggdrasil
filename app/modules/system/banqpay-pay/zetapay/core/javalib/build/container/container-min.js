/*
Copyright (c) 2006, BANQPAY! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.BANQPAY.net/yui/license.txt
version: 0.10.0
*/
BANQPAY.util.Config=function(owner){if(owner){this.init(owner);}}
BANQPAY.util.Config.prototype={owner:null,configChangedEvent:null,queueInProgress:false,addProperty:function(key,propertyObject){},getConfig:function(){},getProperty:function(key){},resetProperty:function(key){},setProperty:function(key,value,silent){},queueProperty:function(key,value){},refireEvent:function(key){},applyConfig:function(userConfig,init){},refresh:function(){},fireQueue:function(){},subscribeToConfigEvent:function(key,handler,obj,override){},unsubscribeFromConfigEvent:function(key,handler,obj){},checkBoolean:function(val){if(typeof val=='boolean'){return true;}else{return false;}},checkNumber:function(val){if(isNaN(val)){return false;}else{return true;}}}
BANQPAY.util.Config.prototype.init=function(owner){this.owner=owner;this.configChangedEvent=new BANQPAY.util.CustomEvent("configChanged");this.queueInProgress=false;var config={};var initialConfig={};var eventQueue=[];var fireEvent=function(key,value){key=key.toLowerCase();var property=config[key];if(typeof property!='undefined'&&property.event){property.event.fire(value);}}
this.addProperty=function(key,propertyObject){key=key.toLowerCase();config[key]=propertyObject;propertyObject.event=new BANQPAY.util.CustomEvent(key);propertyObject.key=key;if(propertyObject.handler){propertyObject.event.subscribe(propertyObject.handler,this.owner,true);}
this.setProperty(key,propertyObject.value,true);if(!propertyObject.suppressEvent){this.queueProperty(key,propertyObject.value);}}
this.getConfig=function(){var cfg={};for(var prop in config){var property=config[prop]
if(typeof property!='undefined'&&property.event){cfg[prop]=property.value;}}
return cfg;}
this.getProperty=function(key){key=key.toLowerCase();var property=config[key];if(typeof property!='undefined'&&property.event){return property.value;}else{return undefined;}}
this.resetProperty=function(key){key=key.toLowerCase();var property=config[key];if(typeof property!='undefined'&&property.event){this.setProperty(key,initialConfig[key].value);}else{return undefined;}}
this.setProperty=function(key,value,silent){key=key.toLowerCase();if(this.queueInProgress&&!silent){this.queueProperty(key,value);return true;}else{var property=config[key];if(typeof property!='undefined'&&property.event){if(property.validator&&!property.validator(value)){return false;}else{property.value=value;if(!silent){fireEvent(key,value);this.configChangedEvent.fire([key,value]);}
return true;}}else{return false;}}}
this.queueProperty=function(key,value){key=key.toLowerCase();var property=config[key];if(typeof property!='undefined'&&property.event){if(typeof value!='undefined'&&property.validator&&!property.validator(value)){return false;}else{if(typeof value!='undefined'){property.value=value;}else{value=property.value;}
var foundDuplicate=false;for(var i=0;i<eventQueue.length;i++){var queueItem=eventQueue[i];if(queueItem){var queueItemKey=queueItem[0];var queueItemValue=queueItem[1];if(queueItemKey.toLowerCase()==key){eventQueue[i]=null;eventQueue.push([key,(typeof value!='undefined'?value:queueItemValue)]);foundDuplicate=true;break;}}}
if(!foundDuplicate&&typeof value!='undefined'){eventQueue.push([key,value]);}}
if(property.supercedes){for(var s=0;s<property.supercedes.length;s++){var supercedesCheck=property.supercedes[s];for(var q=0;q<eventQueue.length;q++){var queueItemCheck=eventQueue[q];if(queueItemCheck){var queueItemCheckKey=queueItemCheck[0];var queueItemCheckValue=queueItemCheck[1];if(queueItemCheckKey.toLowerCase()==supercedesCheck.toLowerCase()){eventQueue.push([queueItemCheckKey,queueItemCheckValue]);eventQueue[q]=null;break;}}}}}
return true;}else{return false;}}
this.refireEvent=function(key){key=key.toLowerCase();var property=config[key];if(typeof property!='undefined'&&property.event&&typeof property.value!='undefined'){if(this.queueInProgress){this.queueProperty(key);}else{fireEvent(key,property.value);}}}
this.applyConfig=function(userConfig,init){if(init){initialConfig=userConfig;}
for(var prop in userConfig){this.queueProperty(prop,userConfig[prop]);}}
this.refresh=function(){for(var prop in config){this.refireEvent(prop);}}
this.fireQueue=function(){this.queueInProgress=true;for(var i=0;i<eventQueue.length;i++){var queueItem=eventQueue[i];if(queueItem){var key=queueItem[0];var value=queueItem[1];var property=config[key];property.value=value;fireEvent(key,value);}}
this.queueInProgress=false;eventQueue=new Array();}
this.subscribeToConfigEvent=function(key,handler,obj,override){key=key.toLowerCase();var property=config[key];if(typeof property!='undefined'&&property.event){if(!BANQPAY.util.Config.alreadySubscribed(property.event,handler,obj)){property.event.subscribe(handler,obj,override);}
return true;}else{return false;}}
this.unsubscribeFromConfigEvent=function(key,handler,obj){key=key.toLowerCase();var property=config[key];if(typeof property!='undefined'&&property.event){return property.event.unsubscribe(handler,obj);}else{return false;}}
this.outputEventQueue=function(){var output="";for(var q=0;q<eventQueue.length;q++){var queueItem=eventQueue[q];if(queueItem){output+=queueItem[0]+"="+queueItem[1]+", ";}}
return output;}}
BANQPAY.util.Config.alreadySubscribed=function(evt,fn,obj){for(var e=0;e<evt.subscribers.length;e++){var subsc=evt.subscribers[e];if(subsc&&subsc.obj==obj&&subsc.fn==fn){return true;break;}}
return false;}
BANQPAY.widget.Module=function(el,userConfig){if(el){this.init(el,userConfig);}}
BANQPAY.widget.Module.IMG_ROOT="http://us.i1.yimg.com/us.yimg.com/i/";BANQPAY.widget.Module.IMG_ROOT_SSL="https://a248.e.akamai.net/sec.yimg.com/i/";BANQPAY.widget.Module.CSS_MODULE="module";BANQPAY.widget.Module.CSS_HEADER="hd";BANQPAY.widget.Module.CSS_BODY="bd";BANQPAY.widget.Module.CSS_FOOTER="ft";BANQPAY.widget.Module.prototype={constructor:BANQPAY.widget.Module,element:null,header:null,body:null,footer:null,id:null,childNodesInDOM:null,imageRoot:BANQPAY.widget.Module.IMG_ROOT,beforeInitEvent:null,initEvent:null,appendEvent:null,beforeRenderEvent:null,renderEvent:null,changeHeaderEvent:null,changeBodyEvent:null,changeFooterEvent:null,changeContentEvent:null,destroyEvent:null,beforeShowEvent:null,showEvent:null,beforeHideEvent:null,hideEvent:null,initEvents:function(){this.beforeInitEvent=new BANQPAY.util.CustomEvent("beforeInit");this.initEvent=new BANQPAY.util.CustomEvent("init");this.appendEvent=new BANQPAY.util.CustomEvent("append");this.beforeRenderEvent=new BANQPAY.util.CustomEvent("beforeRender");this.renderEvent=new BANQPAY.util.CustomEvent("render");this.changeHeaderEvent=new BANQPAY.util.CustomEvent("changeHeader");this.changeBodyEvent=new BANQPAY.util.CustomEvent("changeBody");this.changeFooterEvent=new BANQPAY.util.CustomEvent("changeFooter");this.changeContentEvent=new BANQPAY.util.CustomEvent("changeContent");this.destroyEvent=new BANQPAY.util.CustomEvent("destroy");this.beforeShowEvent=new BANQPAY.util.CustomEvent("beforeShow");this.showEvent=new BANQPAY.util.CustomEvent("show");this.beforeHideEvent=new BANQPAY.util.CustomEvent("beforeHide");this.hideEvent=new BANQPAY.util.CustomEvent("hide");},platform:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1){return"windows";}else if(ua.indexOf("macintosh")!=-1){return"mac";}else{return false;}}(),browser:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf('opera')!=-1){return'opera';}else if(ua.indexOf('msie 7')!=-1){return'ie7';}else if(ua.indexOf('msie')!=-1){return'ie';}else if(ua.indexOf('safari')!=-1){return'safari';}else if(ua.indexOf('gecko')!=-1){return'gecko';}else{return false;}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")==0){this.imageRoot=BANQPAY.widget.Module.IMG_ROOT_SSL;return true;}else{return false;}}(),initDefaultConfig:function(){this.cfg.addProperty("visible",{value:true,handler:this.configVisible,validator:this.cfg.checkBoolean});this.cfg.addProperty("effect",{suppressEvent:true,supercedes:["visible"]});this.cfg.addProperty("monitorresize",{value:true,handler:this.configMonitorResize});},init:function(el,userConfig){this.initEvents();this.beforeInitEvent.fire(BANQPAY.widget.Module);this.cfg=new BANQPAY.util.Config(this);if(typeof el=="string"){var elId=el;el=document.getElementById(el);if(!el){el=document.createElement("DIV");el.id=elId;}}
this.element=el;if(el.id){this.id=el.id;}
var childNodes=this.element.childNodes;if(childNodes){for(var i=0;i<childNodes.length;i++){var child=childNodes[i];switch(child.className){case BANQPAY.widget.Module.CSS_HEADER:this.header=child;break;case BANQPAY.widget.Module.CSS_BODY:this.body=child;break;case BANQPAY.widget.Module.CSS_FOOTER:this.footer=child;break;}}}
this.initDefaultConfig();BANQPAY.util.Dom.addClass(this.element,BANQPAY.widget.Module.CSS_MODULE);if(userConfig){this.cfg.applyConfig(userConfig,true);}
if(!BANQPAY.util.Config.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);}
this.initEvent.fire(BANQPAY.widget.Module);},initResizeMonitor:function(){var resizeMonitor=document.getElementById("_yuiResizeMonitor");if(!resizeMonitor){resizeMonitor=document.createElement("DIV");resizeMonitor.style.position="absolute";resizeMonitor.id="_yuiResizeMonitor";resizeMonitor.style.width="1em";resizeMonitor.style.height="1em";resizeMonitor.style.top="-1000px";resizeMonitor.style.left="-1000px";resizeMonitor.innerHTML="&nbsp;";document.body.appendChild(resizeMonitor);}
this.resizeMonitor=resizeMonitor;BANQPAY.util.Event.addListener(this.resizeMonitor,"resize",this.onDomResize,this,true);},onDomResize:function(e,obj){},setHeader:function(headerContent){if(!this.header){this.header=document.createElement("DIV");this.header.className=BANQPAY.widget.Module.CSS_HEADER;}
if(typeof headerContent=="string"){this.header.innerHTML=headerContent;}else{this.header.innerHTML="";this.header.appendChild(headerContent);}
this.changeHeaderEvent.fire(headerContent);this.changeContentEvent.fire();},appendToHeader:function(element){if(!this.header){this.header=document.createElement("DIV");this.header.className=BANQPAY.widget.Module.CSS_HEADER;}
this.header.appendChild(element);this.changeHeaderEvent.fire(element);this.changeContentEvent.fire();},setBody:function(bodyContent){if(!this.body){this.body=document.createElement("DIV");this.body.className=BANQPAY.widget.Module.CSS_BODY;}
if(typeof bodyContent=="string")
{this.body.innerHTML=bodyContent;}else{this.body.innerHTML="";this.body.appendChild(bodyContent);}
this.changeBodyEvent.fire(bodyContent);this.changeContentEvent.fire();},appendToBody:function(element){if(!this.body){this.body=document.createElement("DIV");this.body.className=BANQPAY.widget.Module.CSS_BODY;}
this.body.appendChild(element);this.changeBodyEvent.fire(element);this.changeContentEvent.fire();},setFooter:function(footerContent){if(!this.footer){this.footer=document.createElement("DIV");this.footer.className=BANQPAY.widget.Module.CSS_FOOTER;}
if(typeof footerContent=="string"){this.footer.innerHTML=footerContent;}else{this.footer.innerHTML="";this.footer.appendChild(footerContent);}
this.changeFooterEvent.fire(footerContent);this.changeContentEvent.fire();},appendToFooter:function(element){if(!this.footer){this.footer=document.createElement("DIV");this.footer.className=BANQPAY.widget.Module.CSS_FOOTER;}
this.footer.appendChild(element);this.changeFooterEvent.fire(element);this.changeContentEvent.fire();},render:function(appendToNode,moduleElement){this.beforeRenderEvent.fire();if(!moduleElement){moduleElement=this.element;}
var me=this;var appendTo=function(element){if(typeof element=="string"){element=document.getElementById(element);}
if(element){element.appendChild(me.element);me.appendEvent.fire();}}
if(appendToNode){appendTo(appendToNode);}else{if(!BANQPAY.util.Dom.inDocument(this.element)){return false;}}
if(this.header&&!BANQPAY.util.Dom.inDocument(this.header)){var firstChild=moduleElement.firstChild;if(firstChild){moduleElement.insertBefore(this.header,firstChild);}else{moduleElement.appendChild(this.header);}}
if(this.body&&!BANQPAY.util.Dom.inDocument(this.body)){if(this.footer&&BANQPAY.util.Dom.isAncestor(this.moduleElement,this.footer)){moduleElement.insertBefore(this.body,this.footer);}else{moduleElement.appendChild(this.body);}}
if(this.footer&&!BANQPAY.util.Dom.inDocument(this.footer)){moduleElement.appendChild(this.footer);}
this.renderEvent.fire();return true;},destroy:function(){if(this.element){var parent=this.element.parentNode;}
if(parent){parent.removeChild(this.element);}
this.element=null;this.header=null;this.body=null;this.footer=null;this.destroyEvent.fire();},show:function(){this.cfg.setProperty("visible",true);},hide:function(){this.cfg.setProperty("visible",false);},configVisible:function(type,args,obj){var visible=args[0];if(visible){this.beforeShowEvent.fire();BANQPAY.util.Dom.setStyle(this.element,"display","block");this.showEvent.fire();}else{this.beforeHideEvent.fire();BANQPAY.util.Dom.setStyle(this.element,"display","none");this.hideEvent.fire();}},configMonitorResize:function(type,args,obj){var monitor=args[0];if(monitor){this.initResizeMonitor();}else{BANQPAY.util.Event.removeListener(this.resizeMonitor,"resize",this.onDomResize);this.resizeMonitor=null;}}}
BANQPAY.widget.Overlay=function(el,userConfig){if(arguments.length>0){BANQPAY.widget.Overlay.superclass.constructor.call(this,el,userConfig);}}
BANQPAY.widget.Overlay.prototype=new BANQPAY.widget.Module();BANQPAY.widget.Overlay.prototype.constructor=BANQPAY.widget.Overlay;BANQPAY.widget.Overlay.superclass=BANQPAY.widget.Module.prototype;BANQPAY.widget.Overlay.IFRAME_SRC="promo/m/irs/blank.gif";BANQPAY.widget.Overlay.TOP_LEFT="tl";BANQPAY.widget.Overlay.TOP_RIGHT="tr";BANQPAY.widget.Overlay.BOTTOM_LEFT="bl";BANQPAY.widget.Overlay.BOTTOM_RIGHT="br";BANQPAY.widget.Overlay.CSS_OVERLAY="overlay";BANQPAY.widget.Overlay.prototype.beforeMoveEvent=null;BANQPAY.widget.Overlay.prototype.moveEvent=null;BANQPAY.widget.Overlay.prototype.init=function(el,userConfig){BANQPAY.widget.Overlay.superclass.init.call(this,el);this.beforeInitEvent.fire(BANQPAY.widget.Overlay);BANQPAY.util.Dom.addClass(this.element,BANQPAY.widget.Overlay.CSS_OVERLAY);if(userConfig){this.cfg.applyConfig(userConfig,true);}
if(this.platform=="mac"&&this.browser=="gecko"){if(!BANQPAY.util.Config.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);}
if(!BANQPAY.util.Config.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true);}}
this.initEvent.fire(BANQPAY.widget.Overlay);}
BANQPAY.widget.Overlay.prototype.initEvents=function(){BANQPAY.widget.Overlay.superclass.initEvents.call(this);this.beforeMoveEvent=new BANQPAY.util.CustomEvent("beforeMove",this);this.moveEvent=new BANQPAY.util.CustomEvent("move",this);}
BANQPAY.widget.Overlay.prototype.initDefaultConfig=function(){BANQPAY.widget.Overlay.superclass.initDefaultConfig.call(this);this.cfg.addProperty("x",{handler:this.configX,validator:this.cfg.checkNumber,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("y",{handler:this.configY,validator:this.cfg.checkNumber,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("xy",{handler:this.configXY,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("context",{handler:this.configContext,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("fixedcenter",{value:false,handler:this.configFixedCenter,validator:this.cfg.checkBoolean,supercedes:["iframe","visible"]});this.cfg.addProperty("width",{handler:this.configWidth,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("height",{handler:this.configHeight,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("zIndex",{value:null,handler:this.configzIndex});this.cfg.addProperty("constraintoviewport",{value:false,handler:this.configConstrainToViewport,validator:this.cfg.checkBoolean,supercedes:["iframe","x","y","xy"]});this.cfg.addProperty("iframe",{value:(this.browser=="ie"?true:false),handler:this.configIframe,validator:this.cfg.checkBoolean,supercedes:["zIndex"]});}
BANQPAY.widget.Overlay.prototype.moveTo=function(x,y){this.cfg.setProperty("xy",[x,y]);}
BANQPAY.widget.Overlay.prototype.hideMacGeckoScrollbars=function(){BANQPAY.util.Dom.removeClass(this.element,"show-scrollbars");BANQPAY.util.Dom.addClass(this.element,"hide-scrollbars");}
BANQPAY.widget.Overlay.prototype.showMacGeckoScrollbars=function(){BANQPAY.util.Dom.removeClass(this.element,"hide-scrollbars");BANQPAY.util.Dom.addClass(this.element,"show-scrollbars");}
BANQPAY.widget.Overlay.prototype.configVisible=function(type,args,obj){var visible=args[0];var currentVis=BANQPAY.util.Dom.getStyle(this.element,"visibility");var effect=this.cfg.getProperty("effect");var effectInstances=new Array();if(effect){if(effect instanceof Array){for(var i=0;i<effect.length;i++){var eff=effect[i];effectInstances[effectInstances.length]=eff.effect(this,eff.duration);}}else{effectInstances[effectInstances.length]=effect.effect(this,effect.duration);}}
var isMacGecko=(this.platform=="mac"&&this.browser=="gecko");if(visible){if(isMacGecko){this.showMacGeckoScrollbars();}
if(effect){if(visible){if(currentVis!="visible"){this.beforeShowEvent.fire();for(var i=0;i<effectInstances.length;i++){var e=effectInstances[i];if(i==0&&!BANQPAY.util.Config.alreadySubscribed(e.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){e.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true);}
e.animateIn();}}}}else{if(currentVis!="visible"){this.beforeShowEvent.fire();BANQPAY.util.Dom.setStyle(this.element,"visibility","visible");this.cfg.refireEvent("iframe");this.showEvent.fire();}}}else{if(isMacGecko){this.hideMacGeckoScrollbars();}
if(effect){if(currentVis!="hidden"){this.beforeHideEvent.fire();for(var i=0;i<effectInstances.length;i++){var e=effectInstances[i];if(i==0&&!BANQPAY.util.Config.alreadySubscribed(e.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){e.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);}
e.animateOut();}}}else{if(currentVis!="hidden"){this.beforeHideEvent.fire();BANQPAY.util.Dom.setStyle(this.element,"visibility","hidden");this.cfg.refireEvent("iframe");this.hideEvent.fire();}}}}
BANQPAY.widget.Overlay.prototype.doCenterOnDOMEvent=function(){if(this.cfg.getProperty("visible")){this.center();}}
BANQPAY.widget.Overlay.prototype.configFixedCenter=function(type,args,obj){var val=args[0];if(val){this.center();if(!BANQPAY.util.Config.alreadySubscribed(this.beforeShowEvent,this.center,this)){this.beforeShowEvent.subscribe(this.center,this,true);}
if(!BANQPAY.util.Config.alreadySubscribed(BANQPAY.widget.Overlay.windowResizeEvent,this.doCenterOnDOMEvent,this)){BANQPAY.widget.Overlay.windowResizeEvent.subscribe(this.doCenterOnDOMEvent,this,true);}
if(!BANQPAY.util.Config.alreadySubscribed(BANQPAY.widget.Overlay.windowScrollEvent,this.doCenterOnDOMEvent,this)){BANQPAY.widget.Overlay.windowScrollEvent.subscribe(this.doCenterOnDOMEvent,this,true);}}else{BANQPAY.widget.Overlay.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);BANQPAY.widget.Overlay.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);}}
BANQPAY.widget.Overlay.prototype.configHeight=function(type,args,obj){var height=args[0];var el=this.element;BANQPAY.util.Dom.setStyle(el,"height",height);this.cfg.refireEvent("iframe");}
BANQPAY.widget.Overlay.prototype.configWidth=function(type,args,obj){var width=args[0];var el=this.element;BANQPAY.util.Dom.setStyle(el,"width",width);this.cfg.refireEvent("iframe");}
BANQPAY.widget.Overlay.prototype.configzIndex=function(type,args,obj){var zIndex=args[0];var el=this.element;if(!zIndex){zIndex=BANQPAY.util.Dom.getStyle(el,"zIndex");if(!zIndex||isNaN(zIndex)){zIndex=0;}}
if(this.iframe){if(zIndex<=0){zIndex=1;}
BANQPAY.util.Dom.setStyle(this.iframe,"zIndex",(zIndex-1));}
BANQPAY.util.Dom.setStyle(el,"zIndex",zIndex);this.cfg.setProperty("zIndex",zIndex,true);}
BANQPAY.widget.Overlay.prototype.configXY=function(type,args,obj){var pos=args[0];var x=pos[0];var y=pos[1];this.cfg.setProperty("x",x);this.cfg.setProperty("y",y);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);}
BANQPAY.widget.Overlay.prototype.configX=function(type,args,obj){var x=args[0];var y=this.cfg.getProperty("y");this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");BANQPAY.util.Dom.setX(this.element,x,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);}
BANQPAY.widget.Overlay.prototype.configY=function(type,args,obj){var x=this.cfg.getProperty("x");var y=args[0];this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");BANQPAY.util.Dom.setY(this.element,y,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);}
BANQPAY.widget.Overlay.prototype.configIframe=function(type,args,obj){var val=args[0];var el=this.element;if(val){var x=this.cfg.getProperty("x");var y=this.cfg.getProperty("y");if(!x||!y){this.syncPosition();x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");}
if(!isNaN(x)&&!isNaN(y)){if(!this.iframe){this.iframe=document.createElement("iframe");var parent=el.parentNode;if(parent){parent.appendChild(this.iframe);}else{document.body.appendChild(this.iframe);}
this.iframe.src=this.imageRoot+BANQPAY.widget.Overlay.IFRAME_SRC;BANQPAY.util.Dom.setStyle(this.iframe,"position","absolute");BANQPAY.util.Dom.setStyle(this.iframe,"border","none");BANQPAY.util.Dom.setStyle(this.iframe,"margin","0");BANQPAY.util.Dom.setStyle(this.iframe,"padding","0");BANQPAY.util.Dom.setStyle(this.iframe,"opacity","0");}
BANQPAY.util.Dom.setStyle(this.iframe,"left",x-2+"px");BANQPAY.util.Dom.setStyle(this.iframe,"top",y-2+"px");var width=el.clientWidth;var height=el.clientHeight;BANQPAY.util.Dom.setStyle(this.iframe,"width",(width+2)+"px");BANQPAY.util.Dom.setStyle(this.iframe,"height",(height+2)+"px");if(!this.cfg.getProperty("visible")){this.iframe.style.display="none";}else{this.iframe.style.display="block";}}}else{if(this.iframe){this.iframe.style.display="none";}}}
BANQPAY.widget.Overlay.prototype.configConstrainToViewport=function(type,args,obj){var val=args[0];if(val){if(!BANQPAY.util.Config.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);}}else{this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this);}}
BANQPAY.widget.Overlay.prototype.configContext=function(type,args,obj){var contextArgs=args[0];if(contextArgs){var contextEl=contextArgs[0];var elementMagnetCorner=contextArgs[1];var contextMagnetCorner=contextArgs[2];if(contextEl){if(typeof contextEl=="string"){this.cfg.setProperty("context",[document.getElementById(contextEl),elementMagnetCorner,contextMagnetCorner],true);}
if(elementMagnetCorner&&contextMagnetCorner){this.align(elementMagnetCorner,contextMagnetCorner);}}}}
BANQPAY.widget.Overlay.prototype.align=function(elementAlign,contextAlign){var contextArgs=this.cfg.getProperty("context");if(contextArgs){var context=contextArgs[0];var element=this.element;var me=this;if(!elementAlign){elementAlign=contextArgs[1];}
if(!contextAlign){contextAlign=contextArgs[2];}
if(element&&context){var elementRegion=BANQPAY.util.Dom.getRegion(element);var contextRegion=BANQPAY.util.Dom.getRegion(context);var doAlign=function(v,h){switch(elementAlign){case BANQPAY.widget.Overlay.TOP_LEFT:me.moveTo(h,v);break;case BANQPAY.widget.Overlay.TOP_RIGHT:me.moveTo(h-element.offsetWidth,v);break;case BANQPAY.widget.Overlay.BOTTOM_LEFT:me.moveTo(h,v-element.offsetHeight);break;case BANQPAY.widget.Overlay.BOTTOM_RIGHT:me.moveTo(h-element.offsetWidth,v-element.offsetHeight);break;}}
switch(contextAlign){case BANQPAY.widget.Overlay.TOP_LEFT:doAlign(contextRegion.top,contextRegion.left);break;case BANQPAY.widget.Overlay.TOP_RIGHT:doAlign(contextRegion.top,contextRegion.right);break;case BANQPAY.widget.Overlay.BOTTOM_LEFT:doAlign(contextRegion.bottom,contextRegion.left);break;case BANQPAY.widget.Overlay.BOTTOM_RIGHT:doAlign(contextRegion.bottom,contextRegion.right);break;}}}}
BANQPAY.widget.Overlay.prototype.enforceConstraints=function(type,args,obj){var pos=args[0];var x=pos[0];var y=pos[1];var width=parseInt(this.cfg.getProperty("width"));if(isNaN(width)){width=0;}
var offsetHeight=this.element.offsetHeight;var offsetWidth=(width>0?width:this.element.offsetWidth);var viewPortWidth=BANQPAY.util.Dom.getViewportWidth();var viewPortHeight=BANQPAY.util.Dom.getViewportHeight();var scrollX=window.scrollX||document.documentElement.scrollLeft;var scrollY=window.scrollY||document.documentElement.scrollTop;var topConstraint=scrollY+10;var leftConstraint=scrollX+10;var bottomConstraint=scrollY+viewPortHeight-offsetHeight-10;var rightConstraint=scrollX+viewPortWidth-offsetWidth-10;if(x<leftConstraint){x=leftConstraint;}else if(x>rightConstraint){x=rightConstraint;}
if(y<topConstraint){y=topConstraint;}else if(y>bottomConstraint){y=bottomConstraint;}
this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.cfg.setProperty("xy",[x,y],true);}
BANQPAY.widget.Overlay.prototype.center=function(){var scrollX=window.scrollX||document.documentElement.scrollLeft;var scrollY=window.scrollY||document.documentElement.scrollTop;var viewPortWidth=BANQPAY.util.Dom.getClientWidth();var viewPortHeight=BANQPAY.util.Dom.getClientHeight();var elementWidth=this.element.offsetWidth;var elementHeight=this.element.offsetHeight;var x=(viewPortWidth/2)-(elementWidth/2)+scrollX;var y=(viewPortHeight/2)-(elementHeight/2)+scrollY;this.element.style.left=parseInt(x)+"px";this.element.style.top=parseInt(y)+"px";this.syncPosition();this.cfg.refireEvent("iframe");}
BANQPAY.widget.Overlay.prototype.syncPosition=function(){var pos=BANQPAY.util.Dom.getXY(this.element);this.cfg.setProperty("x",pos[0],true);this.cfg.setProperty("y",pos[1],true);this.cfg.setProperty("xy",pos,true);}
BANQPAY.widget.Overlay.prototype.onDomResize=function(e,obj){BANQPAY.widget.Overlay.superclass.onDomResize.call(this,e,obj);this.cfg.refireEvent("iframe");}
BANQPAY.widget.Overlay.windowScrollEvent=new BANQPAY.util.CustomEvent("windowScroll");BANQPAY.widget.Overlay.windowResizeEvent=new BANQPAY.util.CustomEvent("windowResize");BANQPAY.widget.Overlay.windowScrollHandler=function(e){BANQPAY.widget.Overlay.windowScrollEvent.fire();}
BANQPAY.widget.Overlay.windowResizeHandler=function(e){BANQPAY.widget.Overlay.windowResizeEvent.fire();}
if(BANQPAY.widget.Overlay._initialized==undefined){BANQPAY.util.Event.addListener(window,"scroll",BANQPAY.widget.Overlay.windowScrollHandler);BANQPAY.util.Event.addListener(window,"resize",BANQPAY.widget.Overlay.windowResizeHandler);BANQPAY.widget.Overlay._initialized=true;}
BANQPAY.widget.OverlayManager=function(userConfig){this.init(userConfig);}
BANQPAY.widget.OverlayManager.CSS_FOCUSED="focused";BANQPAY.widget.OverlayManager.prototype={constructor:BANQPAY.widget.OverlayManager,overlays:new Array(),initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"});},getActive:function(){},focus:function(overlay){},remove:function(overlay){},blurAll:function(){},init:function(userConfig){this.cfg=new BANQPAY.util.Config(this);this.initDefaultConfig();if(userConfig){this.cfg.applyConfig(userConfig,true);}
this.cfg.fireQueue();var activeOverlay=null;this.getActive=function(){return activeOverlay;}
this.focus=function(overlay){var o=this.find(overlay);if(o){this.blurAll();activeOverlay=o;BANQPAY.util.Dom.addClass(activeOverlay.element,BANQPAY.widget.OverlayManager.CSS_FOCUSED);this.overlays.sort(this.compareZIndexDesc);var topZIndex=BANQPAY.util.Dom.getStyle(this.overlays[0].element,"zIndex");if(!isNaN(topZIndex)&&this.overlays[0]!=overlay){activeOverlay.cfg.setProperty("zIndex",(parseInt(topZIndex)+1));}
this.overlays.sort(this.compareZIndexDesc);}}
this.remove=function(overlay){var o=this.find(overlay);if(o){var originalZ=BANQPAY.util.Dom.getStyle(o.element,"zIndex");o.cfg.setProperty("zIndex",-1000,true);this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,this.overlays.length-1);o.cfg.setProperty("zIndex",originalZ,true);o.cfg.setProperty("manager",null);o.focusEvent=null
o.blurEvent=null;o.focus=null;o.blur=null;}}
this.blurAll=function(){activeOverlay=null;for(var o=0;o<this.overlays.length;o++){BANQPAY.util.Dom.removeClass(this.overlays[o].element,BANQPAY.widget.OverlayManager.CSS_FOCUSED);}}
var overlays=this.cfg.getProperty("overlays");if(overlays){this.register(overlays);this.overlays.sort(this.compareZIndexDesc);}},register:function(overlay){if(overlay instanceof BANQPAY.widget.Overlay){overlay.cfg.addProperty("manager",{value:this});overlay.focusEvent=new BANQPAY.util.CustomEvent("focus");overlay.blurEvent=new BANQPAY.util.CustomEvent("blur");var mgr=this;overlay.focus=function(){mgr.focus(this);this.focusEvent.fire();}
overlay.blur=function(){mgr.blurAll();this.blurEvent.fire();}
var focusOnDomEvent=function(e,obj){mgr.focus(overlay);}
var focusevent=this.cfg.getProperty("focusevent");BANQPAY.util.Event.addListener(overlay.element,focusevent,focusOnDomEvent,this,true);var zIndex=BANQPAY.util.Dom.getStyle(overlay.element,"zIndex");if(!isNaN(zIndex)){overlay.cfg.setProperty("zIndex",parseInt(zIndex));}else{overlay.cfg.setProperty("zIndex",0);}
this.overlays.push(overlay);return true;}else if(overlay instanceof Array){var regcount=0;for(var i=0;i<overlay.length;i++){if(this.register(overlay[i])){regcount++;}}
if(regcount>0){return true;}}else{return false;}},find:function(overlay){if(overlay instanceof BANQPAY.widget.Overlay){for(var o=0;o<this.overlays.length;o++){if(this.overlays[o]==overlay){return this.overlays[o];}}}else if(typeof overlay=="string"){for(var o=0;o<this.overlays.length;o++){if(this.overlays[o].id==overlay){return this.overlays[o];}}}
return null;},compareZIndexDesc:function(o1,o2){var zIndex1=o1.cfg.getProperty("zIndex");var zIndex2=o2.cfg.getProperty("zIndex");if(zIndex1>zIndex2){return-1;}else if(zIndex1<zIndex2){return 1;}else{return 0;}},showAll:function(){for(var o=0;o<this.overlays.length;o++){this.overlays[o].show();}},hideAll:function(){for(var o=0;o<this.overlays.length;o++){this.overlays[o].hide();}}}
BANQPAY.util.KeyListener=function(attachTo,keyData,handler,event){if(!event){event=BANQPAY.util.KeyListener.KEYDOWN;}
var keyEvent=new BANQPAY.util.CustomEvent("keyPressed");this.enabledEvent=new BANQPAY.util.CustomEvent("enabled");this.disabledEvent=new BANQPAY.util.CustomEvent("disabled");if(typeof attachTo=='string'){attachTo=document.getElementById(attachTo);}
if(typeof handler=='function'){keyEvent.subscribe(handler);}else{keyEvent.subscribe(handler.fn,handler.scope,handler.correctScope);}
var handleKeyPress=function(e,obj){var keyPressed=e.charCode||e.keyCode;if(!keyData.shift)keyData.shift=false;if(!keyData.alt)keyData.alt=false;if(!keyData.ctrl)keyData.ctrl=false;if(e.shiftKey==keyData.shift&&e.altKey==keyData.alt&&e.ctrlKey==keyData.ctrl){if(keyData.keys instanceof Array){for(var i=0;i<keyData.keys.length;i++){if(keyPressed==keyData.keys[i]){keyEvent.fire(keyPressed,e);break;}}}else{if(keyPressed==keyData.keys){keyEvent.fire(keyPressed,e);}}}}
this.enable=function(){if(!this.enabled){BANQPAY.util.Event.addListener(attachTo,event,handleKeyPress);this.enabledEvent.fire(keyData);}
this.enabled=true;}
this.disable=function(){if(this.enabled){BANQPAY.util.Event.removeListener(attachTo,event,handleKeyPress);this.disabledEvent.fire(keyData);}
this.enabled=false;}}
BANQPAY.util.KeyListener.KEYDOWN="keydown";BANQPAY.util.KeyListener.KEYUP="keyup";BANQPAY.util.KeyListener.prototype.enable=function(){};BANQPAY.util.KeyListener.prototype.disable=function(){};BANQPAY.util.KeyListener.prototype.enabledEvent=null;BANQPAY.util.KeyListener.prototype.disabledEvent=null;BANQPAY.widget.Tooltip=function(el,userConfig){if(arguments.length>0){BANQPAY.widget.Tooltip.superclass.constructor.call(this,el,userConfig);}}
BANQPAY.widget.Tooltip.prototype=new BANQPAY.widget.Overlay();BANQPAY.widget.Tooltip.prototype.constructor=BANQPAY.widget.Tooltip;BANQPAY.widget.Tooltip.superclass=BANQPAY.widget.Overlay.prototype;BANQPAY.widget.Tooltip.CSS_TOOLTIP="tt";BANQPAY.widget.Tooltip.prototype.init=function(el,userConfig){if(document.readyState&&document.readyState!="complete"){var deferredInit=function(){this.init(el,userConfig);}
BANQPAY.util.Event.addListener(window,"load",deferredInit,this,true);}else{BANQPAY.widget.Tooltip.superclass.init.call(this,el);this.beforeInitEvent.fire(BANQPAY.widget.Tooltip);BANQPAY.util.Dom.addClass(this.element,BANQPAY.widget.Tooltip.CSS_TOOLTIP);if(userConfig){this.cfg.applyConfig(userConfig,true);}
this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.render(this.cfg.getProperty("container"));this.initEvent.fire(BANQPAY.widget.Tooltip);}}
BANQPAY.widget.Tooltip.prototype.initDefaultConfig=function(){BANQPAY.widget.Tooltip.superclass.initDefaultConfig.call(this);this.cfg.addProperty("preventoverlap",{value:true,handler:this.configPreventOverlap,validator:this.cfg.checkBoolean,supercedes:["x","y","xy"]});this.cfg.addProperty("showdelay",{value:200,handler:this.configShowDelay,validator:this.cfg.checkNumber});this.cfg.addProperty("autodismissdelay",{value:5000,handler:this.configAutoDismissDelay,validator:this.cfg.checkNumber});this.cfg.addProperty("hidedelay",{value:250,handler:this.configHideDelay,validator:this.cfg.checkNumber});this.cfg.addProperty("text",{handler:this.configText,suppressEvent:true});this.cfg.addProperty("container",{value:document.body,handler:this.configContainer});}
BANQPAY.widget.Tooltip.prototype.configText=function(type,args,obj){var text=args[0];if(text){this.setBody(text);}}
BANQPAY.widget.Tooltip.prototype.configContainer=function(type,args,obj){var container=args[0];if(typeof container=='string'){this.cfg.setProperty("container",document.getElementById(container),true);}}
BANQPAY.widget.Tooltip.prototype.configPreventOverlap=function(type,args,obj){var preventoverlap=args[0];if(preventoverlap){if(!BANQPAY.util.Config.alreadySubscribed(this.moveEvent,this.preventOverlap,this)){this.moveEvent.subscribe(this.preventOverlap,this,true);}}else{this.moveEvent.unsubscribe(this.preventOverlap,this);}}
BANQPAY.widget.Tooltip.prototype.configContext=function(type,args,obj){var context=args[0];if(context){if(typeof context=="string"){this.cfg.setProperty("context",document.getElementById(context),true);}
var contextElement=this.cfg.getProperty("context");if(contextElement&&contextElement.title&&!this.cfg.getProperty("text")){this.cfg.setProperty("text",contextElement.title);}
BANQPAY.util.Event.addListener(contextElement,"mouseover",this.onContextMouseOver,this);BANQPAY.util.Event.addListener(contextElement,"mouseout",this.onContextMouseOut,this);}}
BANQPAY.widget.Tooltip.prototype.onContextMouseOver=function(e,obj){if(!obj){obj=this;}
var context=obj.cfg.getProperty("context");if(context.title){obj.tempTitle=context.title;context.title="";}
this.procId=obj.doShow(e);}
BANQPAY.widget.Tooltip.prototype.onContextMouseOut=function(e,obj){if(!obj){obj=this;}
var context=obj.cfg.getProperty("context");if(obj.tempTitle){context.title=obj.tempTitle;}
if(this.procId){clearTimeout(this.procId);}
setTimeout(function(){obj.hide();},obj.cfg.getProperty("hidedelay"));}
BANQPAY.widget.Tooltip.prototype.doShow=function(e){var pageX=BANQPAY.util.Event.getPageX(e);var pageY=BANQPAY.util.Event.getPageY(e);var context=this.cfg.getProperty("context");var yOffset=25;if(this.browser=="opera"&&context.tagName=="A"){yOffset+=12;}
var me=this;return setTimeout(function(){me.moveTo(pageX,pageY+yOffset);me.show();me.doHide();},this.cfg.getProperty("showdelay"));}
BANQPAY.widget.Tooltip.prototype.doHide=function(){var me=this;setTimeout(function(){me.hide();},this.cfg.getProperty("autodismissdelay"));}
BANQPAY.widget.Tooltip.prototype.preventOverlap=function(type,args,obj){var pos=args[0];var x=pos[0];var y=pos[1];var elementRegion=BANQPAY.util.Dom.getRegion(this.element);var contextRegion=BANQPAY.util.Dom.getRegion(this.cfg.getProperty("context"));var intersection=contextRegion.intersect(elementRegion);if(intersection){var overlapHeight=intersection.bottom-intersection.top;y=(y-overlapHeight-10);this.cfg.setProperty("y",y);}}
BANQPAY.widget.Panel=function(el,userConfig){if(arguments.length>0){BANQPAY.widget.Panel.superclass.constructor.call(this,el,userConfig);}}
BANQPAY.widget.Panel.prototype=new BANQPAY.widget.Overlay();BANQPAY.widget.Panel.prototype.constructor=BANQPAY.widget.Panel;BANQPAY.widget.Panel.superclass=BANQPAY.widget.Overlay.prototype;BANQPAY.widget.Panel.CSS_PANEL="panel";BANQPAY.widget.Panel.CSS_PANEL_CONTAINER="panel-container";BANQPAY.widget.Panel.prototype.showMaskEvent=null;BANQPAY.widget.Panel.prototype.hideMaskEvent=null;BANQPAY.widget.Panel.prototype.init=function(el,userConfig){BANQPAY.widget.Panel.superclass.init.call(this,el);this.beforeInitEvent.fire(BANQPAY.widget.Panel);BANQPAY.util.Dom.addClass(this.element,BANQPAY.widget.Panel.CSS_PANEL);this.buildWrapper();if(userConfig){this.cfg.applyConfig(userConfig,true);}
this.beforeRenderEvent.subscribe(function(){var draggable=this.cfg.getProperty("draggable");if(draggable){if(!this.header){this.setHeader("&nbsp;");}}},this,true);this.initEvent.fire(BANQPAY.widget.Panel);}
BANQPAY.widget.Panel.prototype.initEvents=function(){BANQPAY.widget.Panel.superclass.initEvents.call(this);this.showMaskEvent=new BANQPAY.util.CustomEvent("showMask");this.hideMaskEvent=new BANQPAY.util.CustomEvent("hideMask");}
BANQPAY.widget.Panel.prototype.initDefaultConfig=function(){BANQPAY.widget.Panel.superclass.initDefaultConfig.call(this);this.cfg.addProperty("close",{value:true,handler:this.configClose,validator:this.cfg.checkBoolean,supercedes:["visible"]});this.cfg.addProperty("draggable",{value:true,handler:this.configDraggable,validator:this.cfg.checkBoolean,supercedes:["visible"]});this.cfg.addProperty("underlay",{value:"shadow",handler:this.configUnderlay,supercedes:["visible"]});this.cfg.addProperty("modal",{value:false,handler:this.configModal,validator:this.cfg.checkBoolean,supercedes:["visible"]});this.cfg.addProperty("keylisteners",{handler:this.configKeyListeners,suppressEvent:true,supercedes:["visible"]});}
BANQPAY.widget.Panel.prototype.configClose=function(type,args,obj){var val=args[0];var doHide=function(e,obj){obj.hide();}
if(val){if(!this.close){this.close=document.createElement("DIV");BANQPAY.util.Dom.addClass(this.close,"close");if(this.isSecure){BANQPAY.util.Dom.addClass(this.close,"secure");}else{BANQPAY.util.Dom.addClass(this.close,"nonsecure");}
this.close.innerHTML="&nbsp;";this.innerElement.appendChild(this.close);BANQPAY.util.Event.addListener(this.close,"click",doHide,this);}else{this.close.style.display="block";}}else{if(this.close){this.close.style.display="none";}}}
BANQPAY.widget.Panel.prototype.configDraggable=function(type,args,obj){var val=args[0];if(val){if(this.header){BANQPAY.util.Dom.setStyle(this.header,"cursor","move");this.registerDragDrop();}}else{if(this.dd){this.dd.unreg();}
if(this.header){BANQPAY.util.Dom.setStyle(this.header,"cursor","auto");}}}
BANQPAY.widget.Panel.prototype.configUnderlay=function(type,args,obj){var val=args[0];switch(val.toLowerCase()){case"shadow":BANQPAY.util.Dom.removeClass(this.element,"matte");BANQPAY.util.Dom.addClass(this.element,"shadow");if(!this.underlay){this.underlay=document.createElement("DIV");this.underlay.className="underlay";this.underlay.innerHTML="&nbsp;";this.element.appendChild(this.underlay);}
this.sizeUnderlay();break;case"matte":BANQPAY.util.Dom.removeClass(this.element,"shadow");BANQPAY.util.Dom.addClass(this.element,"matte");break;case"none":default:BANQPAY.util.Dom.removeClass(this.element,"shadow");BANQPAY.util.Dom.removeClass(this.element,"matte");break;}}
BANQPAY.widget.Panel.prototype.configModal=function(type,args,obj){var modal=args[0];if(modal){this.buildMask();if(!BANQPAY.util.Config.alreadySubscribed(this.showEvent,this.showMask,this)){this.showEvent.subscribe(this.showMask,this,true);}
if(!BANQPAY.util.Config.alreadySubscribed(this.hideEvent,this.hideMask,this)){this.hideEvent.subscribe(this.hideMask,this,true);}
if(!BANQPAY.util.Config.alreadySubscribed(BANQPAY.widget.Overlay.windowResizeEvent,this.sizeMask,this)){BANQPAY.widget.Overlay.windowResizeEvent.subscribe(this.sizeMask,this,true);}}else{this.beforeShowEvent.unsubscribe(this.showMask,this);this.hideEvent.unsubscribe(this.hideMask,this);BANQPAY.widget.Overlay.windowResizeEvent.unsubscribe(this.sizeMask);}}
BANQPAY.widget.Panel.prototype.configKeyListeners=function(type,args,obj){var listeners=args[0];if(listeners){if(listeners instanceof Array){for(var i=0;i<listeners.length;i++){var listener=listeners[i];if(!BANQPAY.util.Config.alreadySubscribed(this.showEvent,listener.enable,listener)){this.showEvent.subscribe(listener.enable,listener,true);}
if(!BANQPAY.util.Config.alreadySubscribed(this.hideEvent,listener.disable,listener)){this.hideEvent.subscribe(listener.disable,listener,true);}}}else{if(!BANQPAY.util.Config.alreadySubscribed(this.showEvent,listeners.enable,listeners)){this.showEvent.subscribe(listeners.enable,listeners,true);}
if(!BANQPAY.util.Config.alreadySubscribed(this.hideEvent,listeners.disable,listeners)){this.hideEvent.subscribe(listeners.disable,listeners,true);}}}}
BANQPAY.widget.Panel.prototype.buildWrapper=function(){var elementParent=this.element.parentNode;var elementClone=this.element.cloneNode(true);this.innerElement=elementClone;this.innerElement.style.visibility="inherit";BANQPAY.util.Dom.addClass(this.innerElement,"panel");var wrapper=document.createElement("DIV");wrapper.className=BANQPAY.widget.Panel.CSS_PANEL_CONTAINER;wrapper.id=elementClone.id+"_c";wrapper.appendChild(elementClone);if(elementParent){elementParent.replaceChild(wrapper,this.element);}
this.element=wrapper;var childNodes=this.innerElement.childNodes;if(childNodes){for(var i=0;i<childNodes.length;i++){var child=childNodes[i];switch(child.className){case BANQPAY.widget.Module.CSS_HEADER:this.header=child;break;case BANQPAY.widget.Module.CSS_BODY:this.body=child;break;case BANQPAY.widget.Module.CSS_FOOTER:this.footer=child;break;}}}
this.initDefaultConfig();}
BANQPAY.widget.Panel.prototype.sizeUnderlay=function(){if(this.underlay&&this.browser!="gecko"&&this.browser!="safari"){this.underlay.style.width=this.innerElement.offsetWidth+"px";this.underlay.style.height=this.innerElement.offsetHeight+"px";}}
BANQPAY.widget.Panel.prototype.onDomResize=function(e,obj){BANQPAY.widget.Panel.superclass.onDomResize.call(this,e,obj);var me=this;setTimeout(function(){me.sizeUnderlay();},0);};BANQPAY.widget.Panel.prototype.registerDragDrop=function(){if(this.header){this.dd=new BANQPAY.util.DD(this.element.id,"panel");if(!this.header.id){this.header.id=this.id+"_h";}
var me=this;this.dd.startDrag=function(){if(me.browser=="ie"){BANQPAY.util.Dom.addClass(me.element,"drag");}
if(me.cfg.getProperty("constraintoviewport")){var offsetHeight=me.element.offsetHeight;var offsetWidth=me.element.offsetWidth;var viewPortWidth=BANQPAY.util.Dom.getViewportWidth();var viewPortHeight=BANQPAY.util.Dom.getViewportHeight();var scrollX=window.scrollX||document.documentElement.scrollLeft;var scrollY=window.scrollY||document.documentElement.scrollTop;var topConstraint=scrollY+10;var leftConstraint=scrollX+10;var bottomConstraint=scrollY+viewPortHeight-offsetHeight-10;var rightConstraint=scrollX+viewPortWidth-offsetWidth-10;this.minX=leftConstraint
this.maxX=rightConstraint;this.constrainX=true;this.minY=topConstraint;this.maxY=bottomConstraint;this.constrainY=true;}else{this.constrainX=false;this.constrainY=false;}}
this.dd.onDrag=function(){me.syncPosition();me.cfg.refireEvent("iframe");if(this.platform=="mac"&&this.browser=="gecko"){this.showMacGeckoScrollbars();}}
this.dd.endDrag=function(){if(me.browser=="ie"){BANQPAY.util.Dom.removeClass(me.element,"drag");}}
this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA");}}
BANQPAY.widget.Panel.prototype.buildMask=function(){if(!this.mask){this.mask=document.createElement("DIV");this.mask.id=this.id+"_mask";this.mask.className="mask";this.mask.innerHTML="&nbsp;";var maskClick=function(e,obj){BANQPAY.util.Event.stopEvent(e);}
BANQPAY.util.Event.addListener(this.mask,maskClick,this);if(this.browser=="opera"){this.mask.style.backgroundColor="transparent";}
document.body.appendChild(this.mask);}}
BANQPAY.widget.Panel.prototype.hideMask=function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.tabIndex=-1;this.mask.style.display="none";this.hideMaskEvent.fire();BANQPAY.util.Dom.removeClass(document.body,"masked");}}
BANQPAY.widget.Panel.prototype.showMask=function(){if(this.cfg.getProperty("modal")&&this.mask){BANQPAY.util.Dom.addClass(document.body,"masked");this.sizeMask();this.mask.style.display="block";this.mask.tabIndex=0;this.showMaskEvent.fire();}}
BANQPAY.widget.Panel.prototype.sizeMask=function(){if(this.mask){this.mask.style.height=BANQPAY.util.Dom.getDocumentHeight()+"px";this.mask.style.width=BANQPAY.util.Dom.getDocumentWidth()+"px";}}
BANQPAY.widget.Panel.prototype.configHeight=function(type,args,obj){var height=args[0];var el=this.innerElement;BANQPAY.util.Dom.setStyle(el,"height",height);this.cfg.refireEvent("underlay");this.cfg.refireEvent("iframe");}
BANQPAY.widget.Panel.prototype.configWidth=function(type,args,obj){var width=args[0];var el=this.innerElement;BANQPAY.util.Dom.setStyle(el,"width",width);this.cfg.refireEvent("underlay");this.cfg.refireEvent("iframe");}
BANQPAY.widget.Panel.prototype.render=function(appendToNode){return BANQPAY.widget.Panel.superclass.render.call(this,appendToNode,this.innerElement);}
BANQPAY.widget.Dialog=function(el,userConfig){if(arguments.length>0){BANQPAY.widget.Dialog.superclass.constructor.call(this,el,userConfig);}}
BANQPAY.widget.Dialog.prototype=new BANQPAY.widget.Panel();BANQPAY.widget.Dialog.prototype.constructor=BANQPAY.widget.Dialog;BANQPAY.widget.Dialog.superclass=BANQPAY.widget.Panel.prototype;BANQPAY.widget.Dialog.CSS_DIALOG="dialog";BANQPAY.widget.Dialog.prototype.beforeSubmitEvent=null;BANQPAY.widget.Dialog.prototype.submitEvent=null;BANQPAY.widget.Dialog.prototype.manualSubmitEvent=null;BANQPAY.widget.Dialog.prototype.asyncSubmitEvent=null;BANQPAY.widget.Dialog.prototype.formSubmitEvent=null;BANQPAY.widget.Dialog.prototype.cancelEvent=null;BANQPAY.widget.Dialog.prototype.initDefaultConfig=function(){BANQPAY.widget.Dialog.superclass.initDefaultConfig.call(this);var callback={success:null,failure:null,argument:null,scope:this}
this.configOnSuccess=function(type,args,obj){var fn=args[0];callback.success=fn;}
this.configOnFailure=function(type,args,obj){var fn=args[0];callback.failure=fn;}
this.doSubmit=function(){var method=this.cfg.getProperty("postmethod");switch(method){case"async":BANQPAY.util.Connect.setForm(this.form.name);var cObj=BANQPAY.util.Connect.asyncRequest('POST',this.form.action,callback);this.asyncSubmitEvent.fire();break;case"form":this.form.submit();this.formSubmitEvent.fire();break;case"none":case"manual":this.manualSubmitEvent.fire();break;}}
this.cfg.addProperty("postmethod",{value:"async",validator:function(val){if(val!="form"&&val!="async"&&val!="none"&&val!="manual"){return false;}else{return true;}}});this.cfg.addProperty("onsuccess",{handler:this.configOnSuccess,suppressEvent:true});this.cfg.addProperty("onfailure",{handler:this.configOnFailure,suppressEvent:true});this.cfg.addProperty("buttons",{value:"none",handler:this.configButtons});}
BANQPAY.widget.Dialog.prototype.initEvents=function(){BANQPAY.widget.Dialog.superclass.initEvents.call(this);this.beforeSubmitEvent=new BANQPAY.util.CustomEvent("beforeSubmit");this.submitEvent=new BANQPAY.util.CustomEvent("submit");this.manualSubmitEvent=new BANQPAY.util.CustomEvent("manualSubmit");this.asyncSubmitEvent=new BANQPAY.util.CustomEvent("asyncSubmit");this.formSubmitEvent=new BANQPAY.util.CustomEvent("formSubmit");this.cancelEvent=new BANQPAY.util.CustomEvent("cancel");}
BANQPAY.widget.Dialog.prototype.init=function(el,userConfig){BANQPAY.widget.Dialog.superclass.init.call(this,el);this.beforeInitEvent.fire(BANQPAY.widget.Dialog);BANQPAY.util.Dom.addClass(this.element,BANQPAY.widget.Dialog.CSS_DIALOG);if(userConfig){this.cfg.applyConfig(userConfig,true);}
this.renderEvent.subscribe(this.registerForm,this,true);this.showEvent.subscribe(this.focusFirst,this,true);this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.beforeRenderEvent.subscribe(function(){var buttonCfg=this.cfg.getProperty("buttons");if(buttonCfg&&buttonCfg!="none"){if(!this.footer){this.setFooter("");}}},this,true);this.initEvent.fire(BANQPAY.widget.Dialog);}
BANQPAY.widget.Dialog.prototype.registerForm=function(){var form=this.element.getElementsByTagName("FORM")[0];if(!form){var formHTML="<form name=\"frm_"+this.id+"\" action=\"\"></form>";this.body.innerHTML+=formHTML;form=this.element.getElementsByTagName("FORM")[0];}
this.firstFormElement=function(){for(var f=0;f<form.elements.length;f++){var el=form.elements[f];if(el.focus){if(el.type&&el.type!="hidden"){return el;break;}}}
return null;}();this.lastFormElement=function(){for(var f=form.elements.length-1;f>=0;f--){var el=form.elements[f];if(el.focus){if(el.type&&el.type!="hidden"){return el;break;}}}
return null;}();this.form=form;if(this.cfg.getProperty("modal")&&this.form){var me=this;var firstElement=this.firstFormElement||this.firstButton;if(firstElement){this.preventBackTab=new BANQPAY.util.KeyListener(firstElement,{shift:true,keys:9},{fn:me.focusLast,scope:me,correctScope:true});this.showEvent.subscribe(this.preventBackTab.enable,this.preventBackTab,true);this.hideEvent.subscribe(this.preventBackTab.disable,this.preventBackTab,true);}
var lastElement=this.lastButton||this.lastFormElement;if(lastElement){this.preventTabOut=new BANQPAY.util.KeyListener(lastElement,{shift:false,keys:9},{fn:me.focusFirst,scope:me,correctScope:true});this.showEvent.subscribe(this.preventTabOut.enable,this.preventTabOut,true);this.hideEvent.subscribe(this.preventTabOut.disable,this.preventTabOut,true);}}}
BANQPAY.widget.Dialog.prototype.configButtons=function(type,args,obj){var buttons=args[0];if(buttons!="none"){this.buttonSpan=null;this.buttonSpan=document.createElement("SPAN");this.buttonSpan.className="button-group";for(var b=0;b<buttons.length;b++){var button=buttons[b];var htmlButton=document.createElement("BUTTON");if(button.isDefault){htmlButton.className="default";this.defaultHtmlButton=htmlButton;}
htmlButton.appendChild(document.createTextNode(button.text));BANQPAY.util.Event.addListener(htmlButton,"click",button.handler,this,true);this.buttonSpan.appendChild(htmlButton);button.htmlButton=htmlButton;if(b==0){this.firstButton=button.htmlButton;}
if(b==(buttons.length-1)){this.lastButton=button.htmlButton;}}
this.setFooter(this.buttonSpan);this.cfg.refireEvent("iframe");this.cfg.refireEvent("underlay");}}
BANQPAY.widget.Dialog.prototype.configOnSuccess=function(type,args,obj){};BANQPAY.widget.Dialog.prototype.configOnFailure=function(type,args,obj){};BANQPAY.widget.Dialog.prototype.doSubmit=function(){};BANQPAY.widget.Dialog.prototype.focusFirst=function(type,args,obj){if(args){var e=args[1];if(e){BANQPAY.util.Event.stopEvent(e);}}
if(this.firstFormElement){this.firstFormElement.focus();}else{this.focusDefaultButton();}}
BANQPAY.widget.Dialog.prototype.focusLast=function(type,args,obj){if(args){var e=args[1];if(e){BANQPAY.util.Event.stopEvent(e);}}
var buttons=this.cfg.getProperty("buttons");if(buttons&&buttons instanceof Array){this.focusLastButton();}else{if(this.lastFormElement){this.lastFormElement.focus();}}}
BANQPAY.widget.Dialog.prototype.focusDefaultButton=function(){if(this.defaultHtmlButton){this.defaultHtmlButton.focus();}}
BANQPAY.widget.Dialog.prototype.blurButtons=function(){var buttons=this.cfg.getProperty("buttons");if(buttons&&buttons instanceof Array){var html=buttons[0].htmlButton;if(html){html.blur();}}}
BANQPAY.widget.Dialog.prototype.focusFirstButton=function(){var buttons=this.cfg.getProperty("buttons");if(buttons&&buttons instanceof Array){var html=buttons[0].htmlButton;if(html){html.focus();}}}
BANQPAY.widget.Dialog.prototype.focusLastButton=function(){var buttons=this.cfg.getProperty("buttons");if(buttons&&buttons instanceof Array){var html=buttons[buttons.length-1].htmlButton;if(html){html.focus();}}}
BANQPAY.widget.Dialog.prototype.validate=function(){return true;}
BANQPAY.widget.Dialog.prototype.submit=function(){if(this.validate()){this.beforeSubmitEvent.fire();this.doSubmit();this.submitEvent.fire();this.hide();return true;}else{return false;}}
BANQPAY.widget.Dialog.prototype.cancel=function(){this.cancelEvent.fire();this.hide();}
BANQPAY.widget.Dialog.prototype.getData=function(){var form=this.form;var data={};if(form){for(var i in this.form){var formItem=form[i];if(formItem){if(formItem.tagName){switch(formItem.tagName){case"INPUT":switch(formItem.type){case"checkbox":data[i]=formItem.checked;break;case"textbox":case"text":case"hidden":data[i]=formItem.value;break;}
break;case"TEXTAREA":data[i]=formItem.value;break;case"SELECT":var val=new Array();for(var x=0;x<formItem.options.length;x++){var option=formItem.options[x];if(option.selected){var selval=option.value;if(!selval||selval==""){selval=option.text;}
val[val.length]=selval;}}
data[i]=val;break;}}else if(formItem[0]&&formItem[0].tagName){switch(formItem[0].tagName){case"INPUT":switch(formItem[0].type){case"radio":for(var r=0;r<formItem.length;r++){var radio=formItem[r];if(radio.checked){data[radio.name]=radio.value;break;}}
break;case"checkbox":var cbArray=new Array();for(var c=0;c<formItem.length;c++){var check=formItem[c];if(check.checked){cbArray[cbArray.length]=check.value;}}
data[formItem[0].name]=cbArray;break;}}}}}}
return data;}
BANQPAY.widget.SimpleDialog=function(el,userConfig){if(arguments.length>0){BANQPAY.widget.SimpleDialog.superclass.constructor.call(this,el,userConfig);}}
BANQPAY.widget.SimpleDialog.prototype=new BANQPAY.widget.Dialog();BANQPAY.widget.SimpleDialog.prototype.constructor=BANQPAY.widget.SimpleDialog;BANQPAY.widget.SimpleDialog.superclass=BANQPAY.widget.Dialog.prototype;BANQPAY.widget.SimpleDialog.ICON_BLOCK="nt/ic/ut/bsc/blck16_1.gif";BANQPAY.widget.SimpleDialog.ICON_ALARM="nt/ic/ut/bsc/alrt16_1.gif";BANQPAY.widget.SimpleDialog.ICON_HELP="nt/ic/ut/bsc/hlp16_1.gif";BANQPAY.widget.SimpleDialog.ICON_INFO="nt/ic/ut/bsc/info16_1.gif";BANQPAY.widget.SimpleDialog.ICON_WARN="nt/ic/ut/bsc/warn16_1.gif";BANQPAY.widget.SimpleDialog.ICON_TIP="nt/ic/ut/bsc/tip16_1.gif";BANQPAY.widget.SimpleDialog.CSS_SIMPLEDIALOG="simple-dialog";BANQPAY.widget.SimpleDialog.prototype.initDefaultConfig=function(){BANQPAY.widget.SimpleDialog.superclass.initDefaultConfig.call(this);this.cfg.addProperty("icon",{value:"none",handler:this.configIcon,suppressEvent:true});this.cfg.addProperty("text",{value:"",handler:this.configText,suppressEvent:true,supercedes:["icon"]});}
BANQPAY.widget.SimpleDialog.prototype.init=function(el,userConfig){BANQPAY.widget.SimpleDialog.superclass.init.call(this,el);this.beforeInitEvent.fire(BANQPAY.widget.SimpleDialog);BANQPAY.util.Dom.addClass(this.element,BANQPAY.widget.SimpleDialog.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(userConfig){this.cfg.applyConfig(userConfig,true);}
this.beforeRenderEvent.subscribe(function(){if(!this.body){this.setBody("");}},this,true);this.initEvent.fire(BANQPAY.widget.SimpleDialog);}
BANQPAY.widget.SimpleDialog.prototype.registerForm=function(){BANQPAY.widget.SimpleDialog.superclass.registerForm.call(this);this.form.innerHTML+="<input type=\"hidden\" name=\""+this.id+"\" value=\"\"/>";}
BANQPAY.widget.SimpleDialog.prototype.configIcon=function(type,args,obj){var icon=args[0];if(icon&&icon!="none"){var iconHTML="<img src=\""+this.imageRoot+icon+"\" class=\"icon\" />";this.body.innerHTML=iconHTML+this.body.innerHTML;}}
BANQPAY.widget.SimpleDialog.prototype.configText=function(type,args,obj){var text=args[0];if(text){this.setBody(text);}}
BANQPAY.widget.ContainerEffect=function(overlay,attrIn,attrOut,targetElement){this.overlay=overlay;this.attrIn=attrIn;this.attrOut=attrOut;this.targetElement=targetElement||overlay.element;this.beforeAnimateInEvent=new BANQPAY.util.CustomEvent("beforeAnimateIn");this.beforeAnimateOutEvent=new BANQPAY.util.CustomEvent("beforeAnimateOut");this.animateInCompleteEvent=new BANQPAY.util.CustomEvent("animateInComplete");this.animateOutCompleteEvent=new BANQPAY.util.CustomEvent("animateOutComplete");}
BANQPAY.widget.ContainerEffect.prototype.init=function(animClass){if(!animClass){animClass=BANQPAY.util.Anim;}
this.animIn=new animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this);}
BANQPAY.widget.ContainerEffect.prototype.animateIn=function(){this.beforeAnimateInEvent.fire();this.animIn.animate();}
BANQPAY.widget.ContainerEffect.prototype.animateOut=function(){this.beforeAnimateOutEvent.fire();this.animOut.animate();}
BANQPAY.widget.ContainerEffect.prototype.handleStartAnimateIn=function(type,args,obj){}
BANQPAY.widget.ContainerEffect.prototype.handleTweenAnimateIn=function(type,args,obj){}
BANQPAY.widget.ContainerEffect.prototype.handleCompleteAnimateIn=function(type,args,obj){}
BANQPAY.widget.ContainerEffect.prototype.handleStartAnimateOut=function(type,args,obj){}
BANQPAY.widget.ContainerEffect.prototype.handleTweenAnimateOut=function(type,args,obj){}
BANQPAY.widget.ContainerEffect.prototype.handleCompleteAnimateOut=function(type,args,obj){}
BANQPAY.widget.ContainerEffect.FADE=function(overlay,dur){var fade=new BANQPAY.widget.ContainerEffect(overlay,{attributes:{opacity:{from:0,to:1}},duration:dur,method:BANQPAY.util.Easing.easeIn},{attributes:{opacity:{to:0}},duration:dur,method:BANQPAY.util.Easing.easeOut});fade.handleStartAnimateIn=function(type,args,obj){BANQPAY.util.Dom.addClass(obj.overlay.element,"hide-select");if(!obj.overlay.underlay){obj.overlay.cfg.refireEvent("underlay");}
if(obj.overlay.underlay){obj.initialUnderlayOpacity=BANQPAY.util.Dom.getStyle(obj.overlay.underlay,"opacity");obj.overlay.underlay.style.filter=null;}
BANQPAY.util.Dom.setStyle(obj.overlay.element,"visibility","visible");BANQPAY.util.Dom.setStyle(obj.overlay.element,"opacity",0);}
fade.handleCompleteAnimateIn=function(type,args,obj){BANQPAY.util.Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}
if(obj.overlay.underlay){BANQPAY.util.Dom.setStyle(obj.overlay.underlay,"opacity",obj.initialUnderlayOpacity);}
obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();}
fade.handleStartAnimateOut=function(type,args,obj){BANQPAY.util.Dom.addClass(obj.overlay.element,"hide-select");if(obj.overlay.underlay){obj.overlay.underlay.style.filter=null;}}
fade.handleCompleteAnimateOut=function(type,args,obj){BANQPAY.util.Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}
BANQPAY.util.Dom.setStyle(obj.overlay.element,"visibility","hidden");BANQPAY.util.Dom.setStyle(obj.overlay.element,"opacity",1);obj.overlay.cfg.refireEvent("iframe");obj.animateOutCompleteEvent.fire();};fade.init();return fade;};BANQPAY.widget.ContainerEffect.SLIDE=function(overlay,dur){var x=overlay.cfg.getProperty("x")||BANQPAY.util.Dom.getX(overlay.element);var y=overlay.cfg.getProperty("y")||BANQPAY.util.Dom.getY(overlay.element);var clientWidth=BANQPAY.util.Dom.getClientWidth();var offsetWidth=overlay.element.offsetWidth;var slide=new BANQPAY.widget.ContainerEffect(overlay,{attributes:{points:{to:[x,y]}},duration:dur,method:BANQPAY.util.Easing.easeIn},{attributes:{points:{to:[(clientWidth+25),y]}},duration:dur,method:BANQPAY.util.Easing.easeOut});slide.handleStartAnimateIn=function(type,args,obj){obj.overlay.element.style.left=(-25-offsetWidth)+"px";obj.overlay.element.style.top=y+"px";}
slide.handleTweenAnimateIn=function(type,args,obj){var pos=BANQPAY.util.Dom.getXY(obj.overlay.element);var currentX=pos[0];var currentY=pos[1];if(BANQPAY.util.Dom.getStyle(obj.overlay.element,"visibility")=="hidden"&&currentX<x){BANQPAY.util.Dom.setStyle(obj.overlay.element,"visibility","visible");}
obj.overlay.cfg.setProperty("xy",[currentX,currentY],true);obj.overlay.cfg.refireEvent("iframe");}
slide.handleCompleteAnimateIn=function(type,args,obj){obj.overlay.cfg.setProperty("xy",[x,y],true);obj.startX=x;obj.startY=y;obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();}
slide.handleStartAnimateOut=function(type,args,obj){var clientWidth=BANQPAY.util.Dom.getViewportWidth();var pos=BANQPAY.util.Dom.getXY(obj.overlay.element);var x=pos[0];var y=pos[1];var currentTo=obj.animOut.attributes.points.to;obj.animOut.attributes.points.to=[(clientWidth+25),y];}
slide.handleTweenAnimateOut=function(type,args,obj){var pos=BANQPAY.util.Dom.getXY(obj.overlay.element);var x=pos[0];var y=pos[1];obj.overlay.cfg.setProperty("xy",[x,y],true);obj.overlay.cfg.refireEvent("iframe");}
slide.handleCompleteAnimateOut=function(type,args,obj){BANQPAY.util.Dom.setStyle(obj.overlay.element,"visibility","hidden");var offsetWidth=obj.overlay.element.offsetWidth;obj.overlay.cfg.setProperty("xy",[x,y]);obj.animateOutCompleteEvent.fire();};slide.init(BANQPAY.util.Motion);return slide;}